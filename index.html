<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
		<style>
			html, body {
				width: 100%;
				height: 100%;
				margin: 0;
			}
			#container {
				background: #999;
				width: 100%;
				height: 100%;
			}
		</style>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <script src="js/three.min.js"></script>
        <script src="js/stats.min.js"></script>
        <script src="js/particle-viewer.core.js"></script>
        <script src="js/particle-viewer.settings.js"></script>
        <script src="js/particle-viewer.renderer.js"></script>
        <script src="js/example-animation.json"></script>
        <script src="js/controls/TrackballControls.js"></script>
    </head>
    <body>
    	<div id="container"></div>
    </body>
    <script>
    	/**
    	 * Generate molecules on random places in random direction.
    	 * @param x: the amount of molecules to render.
    	 * @param t: the time for it to continue.
    	 */
    	function randomMolecules( x, t ) {
			function r( min, max ) {
				return Math.floor( Math.random() * ( max - min + 1 ) ) + min;
			}
			
	    	var pa = window.exampleAnimation.particles = [],
	    		a = window.exampleAnimation.animation = [],
	    		p = window.exampleAnimation.properties;
	    	
	    	// loop through all particles
	    	while( x-- ) {
		    	pa.push({ "type": "protein" });
		    	
		    	// for each time-frame create coordinates
		    	for( var i = 0; i < t; i++ ) {
			    	a[i] = a[i] || [];
			    	
			    	if( i == 0 ) {
				    	// set start coords
				    	a[i][x] = [r(0, p.width), r(0, p.height), r(0, p.depth)];
			    	} else {
			    		// use previous frame and add either -1, 0 or 1 to each coord.
				    	var prev = a[i-1][x];
				    	
				    	a[i][x] = [
				    		prev[0]+r(prev[0] <= 0 ? 0 : -1, prev[0] >= p.width ? 0 : 1),
				    		prev[1]+r(prev[1] <= 0 ? 0 : -1, prev[1] >= p.height ? 0 : 1),
				    		prev[2]+r(prev[2] <= 0 ? 0 : -1, prev[2] >= p.depth ? 0 : 1)
				    	];
			    	}
		    	}
	    	}
	    	console.log(JSON.stringify(window.exampleAnimation));
    	}
    	randomMolecules(500, 20);
    
    	PV.load( exampleAnimation ).init( "#container" ).start();
    </script>
</html>